<script type="text/x-handlebars-template" id="tag-template">
    <div class="alert alert-info alert-dismissible fade in" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
        <strong class="text"></strong>
    </div>
</script>

<script>
    (function (window, factory) {
        if (typeof define === 'function' && define.amd) {
            // AMD
            define(factory);
        } else if (typeof exports === 'object') {
            // Node, CommonJS-like
            module.exports = factory();
        } else {
            // Browser globals (window is window)
            window.DefineTag = factory();
        };
    }(window, function () {
        $('body').on('click','.tags .btn.addTag',function(e){
            addTag(e.target);
        });
        function addTag(dom){
            var num = $(dom).prev().val();
            if (!num) {
                return false;
            };
            var newOne = $( $('#tag-template').html() );
            newOne.find('.text').text(num);
            newOne.insertBefore( $(dom).prev() );
        };

        function collectPortTags(tabId){
            var params = {};
            params.ports = [];
            $('#'+tabId).find('.editView .tags .text').each(function(i,perT){
                params.ports.push($(perT).text());
            });
            return params;
        }
        return {
            addTag:addTag,
            collectPortTags:collectPortTags
        };
    }));
    
</script>